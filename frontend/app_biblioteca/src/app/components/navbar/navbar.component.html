<nav class="navbar navbar-expand-lg px-3">
  <!-- Biblioteca title -->
  <a class="navbar-brand fw-bold text-dark" href="#">Biblioteca</a>

  <!-- Responsive toggle button -->
  <button
    class="navbar-toggler"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#navbarContent"
    aria-controls="navbarContent"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Collapsible content -->
  <div class="collapse navbar-collapse" id="navbarContent">
    <!-- Usuarios and Préstamos buttons -->
    <div class="d-flex flex-column flex-lg-row align-items-lg-center me-auto">
      <a routerLink="/users"*ngIf="isToken && (isAdmin || isLibrarian)"class="btn btn-outline-dark me-2 mb-2 mb-lg-0"style="border-radius: 15px;">
        <i class="bi bi-people-fill"></i> Usuarios
      </a>

      <a routerLink="/librarian-rents" *ngIf="isToken && (isAdmin || isLibrarian)"class="btn btn-outline-dark me-2 mb-2 mb-lg-0"style="border-radius: 15px;">
        <i class="bi bi-journal-bookmark-fill"></i> Préstamos
      </a>
    </div>

    <!-- Right section -->
    <div class="d-flex flex-column flex-lg-row align-items-lg-center ms-auto">
      <a routerLink="/login" *ngIf="!isToken" class="btn btn-outline-dark me-2 mb-2 mb-lg-0" style="border-radius: 15px;">
        <i class="bi bi-box-arrow-in-right"></i> Login
      </a>

      <a routerLink="/register" *ngIf="!isToken" class="btn btn-outline-dark me-2 mb-2 mb-lg-0" style="border-radius: 15px;" >
        <i class="bi bi-pencil-square"></i> Register
      </a>

      <!-- Menu Options -->
      <ng-container *ngIf="isToken">
        <ng-container *ngIf="isSmallScreen; else desktopMenu">
          <!-- Buttons for small screens -->
          <a routerLink="/notifications" class="btn btn-outline-dark me-2 mb-2 mb-lg-0" style="border-radius: 15px;">
            <i class="bi bi-bell-fill"></i> Notificaciones
          </a>

          <a routerLink="/rents" *ngIf="isUser" class="btn btn-outline-dark me-2 mb-2 mb-lg-0" style="border-radius: 15px;">
            <i class="bi bi-basket-fill"></i> Alquileres
          </a>
          
          <a routerLink="/profile" class="btn btn-outline-dark me-2 mb-2 mb-lg-0" style="border-radius: 15px;">
            <i class="bi bi-person-fill"></i> Perfil
          </a
          >
          <button class="btn btn-outline-danger" (click)="cerrarSesion()" style="border-radius: 15px;">
            <i class="bi bi-box-arrow-right"></i> Cerrar sesión
          </button>
        </ng-container>

        <!-- Dropdown Menu for larger screens -->
        <ng-template #desktopMenu>
          <div class="dropdown">

            <button class="btn btn-outline-dark dropdown-toggle" style="border-radius: 15px;" type="button" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-list"></i> Menú
            </button>

            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu"style="min-width: 200px;">
              <li>
                <a class="dropdown-item" routerLink="/notifications">
                  <i class="bi bi-bell-fill me-2"></i> Notificaciones
                </a>
              </li>

              <li *ngIf="isUser">
                <a class="dropdown-item" routerLink="/rents">
                  <i class="bi bi-basket-fill me-2"></i> Alquileres
                </a>
              </li>

              <li>
                <a class="dropdown-item" routerLink="/profile">
                  <i class="bi bi-person-fill me-2"></i> Perfil
                </a>
              </li>

              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item text-danger" href="#" (click)="cerrarSesion()">
                  <i class="bi bi-box-arrow-right me-2"></i> Cerrar sesión
                </a>
              </li>

            </ul>
          </div>
        </ng-template>

      </ng-container>
    </div>
  </div>
</nav>
